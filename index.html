<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸå¸‚åŒ¹é…æµ‹éªŒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #faf9f7;
            --bg-secondary: #ffffff;
            --bg-gradient: linear-gradient(135deg, #f5f3f0 0%, #e8e4df 100%);
            --text-primary: #2d2a26;
            --text-secondary: #6b6560;
            --text-muted: #9a958f;
            --accent-purple: #7c5ce0;
            --accent-purple-light: #a78bfa;
            --accent-blue: #4a90d9;
            --wood: #4ade80;
            --fire: #f87171;
            --earth: #fbbf24;
            --metal: #94a3b8;
            --water: #60a5fa;
            --border: #e5e2dd;
            --shadow: 0 4px 24px rgba(0,0,0,0.06);
            --shadow-lg: 0 12px 48px rgba(0,0,0,0.1);
            --radius: 16px;
            --radius-lg: 24px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .page {
            display: none;
            flex: 1;
            animation: fadeIn 0.4s ease;
        }

        .page.active {
            display: flex;
            flex-direction: column;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .icon-wrapper {
            width: 72px;
            height: 72px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 40px auto 24px;
            font-size: 32px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-purple-light) 100%);
            box-shadow: 0 8px 32px rgba(124, 92, 224, 0.3);
        }

        .icon-wrapper.teal {
            background: linear-gradient(135deg, #14b8a6 0%, #5eead4 100%);
            box-shadow: 0 8px 32px rgba(20, 184, 166, 0.3);
        }

        .icon-wrapper.blue {
            background: linear-gradient(135deg, #3b82f6 0%, #93c5fd 100%);
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);
        }

        .icon-wrapper.orange {
            background: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
            box-shadow: 0 8px 32px rgba(249, 115, 22, 0.3);
        }

        .page-title {
            font-family: 'Noto Serif SC', serif;
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            color: var(--accent-purple);
            margin-bottom: 12px;
        }

        .page-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 32px;
        }

        .card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title .emoji {
            font-size: 18px;
        }

        .card-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 8px;
            display: block;
        }

        .select-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        select, input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 15px;
            font-family: inherit;
            background: var(--bg-secondary);
            color: var(--text-primary);
            appearance: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b6560' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 36px;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--accent-purple);
            box-shadow: 0 0 0 3px rgba(124, 92, 224, 0.1);
        }

        .btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 500;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(124, 92, 224, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(124, 92, 224, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-primary);
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .info-box {
            background: linear-gradient(135deg, #f0f4ff 0%, #e8f0fe 100%);
            border-radius: var(--radius);
            padding: 16px 20px;
            margin-bottom: 24px;
            border-left: 3px solid var(--accent-purple);
        }

        .info-box .title {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent-purple);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-box .text {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Password Page */
        .password-input {
            text-align: center;
            font-size: 24px;
            letter-spacing: 8px;
            font-weight: 600;
        }

        .password-hint {
            font-size: 12px;
            color: var(--text-muted);
            text-align: center;
            margin-top: 8px;
        }

        /* Admin Page */
        .code-list {
            margin-top: 16px;
        }

        .code-item {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code-info {
            flex: 1;
        }

        .code-value {
            font-size: 20px;
            font-weight: 600;
            font-family: 'Courier New', monospace;
            color: var(--accent-purple);
            margin-bottom: 4px;
        }

        .code-meta {
            font-size: 12px;
            color: var(--text-muted);
        }

        .code-actions {
            display: flex;
            gap: 8px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 13px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-copy {
            background: var(--accent-blue);
            color: white;
        }

        .btn-copy:hover {
            background: #3b82f6;
        }

        .btn-delete {
            background: #ef4444;
            color: white;
        }

        .btn-delete:hover {
            background: #dc2626;
        }

        .add-code-form {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .add-code-form input {
            flex: 1;
        }

        .stats-card {
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
            color: white;
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 16px;
            text-align: center;
        }

        .stats-number {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stats-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .admin-link {
            text-align: center;
            margin-top: 16px;
        }

        .admin-link a {
            color: var(--text-muted);
            font-size: 12px;
            text-decoration: none;
            opacity: 0.5;
        }

        .admin-link a:hover {
            opacity: 1;
        }

        /* Result Card */
        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 20px;
            color: white;
            text-align: center;
        }

        .wuxing-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin: 0 auto 12px;
            background: rgba(255,255,255,0.2);
        }

        .result-label {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 4px;
        }

        .result-value {
            font-family: 'Noto Serif SC', serif;
            font-size: 18px;
            font-weight: 600;
        }

        .element-desc {
            font-size: 13px;
            opacity: 0.85;
            margin-top: 12px;
            line-height: 1.6;
        }

        /* Relations */
        .relation-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .relation-item {
            background: var(--bg-primary);
            border-radius: var(--radius);
            padding: 14px;
            text-align: center;
        }

        .relation-title {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .relation-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .element-dot {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .element-dot.wood { background: var(--wood); }
        .element-dot.fire { background: var(--fire); }
        .element-dot.earth { background: var(--earth); }
        .element-dot.metal { background: var(--metal); }
        .element-dot.water { background: var(--water); }

        .flow-arrow {
            color: var(--text-muted);
            font-size: 12px;
        }

        /* Quiz */
        .quiz-progress {
            background: var(--border);
            height: 4px;
            border-radius: 2px;
            margin-bottom: 24px;
            overflow: hidden;
        }

        .quiz-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            transition: width 0.3s ease;
        }

        .quiz-counter {
            font-size: 13px;
            color: var(--accent-purple);
            font-weight: 500;
            margin-bottom: 12px;
        }

        .quiz-question {
            font-family: 'Noto Serif SC', serif;
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 24px;
            line-height: 1.5;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .quiz-option:hover {
            border-color: var(--accent-purple);
            background: linear-gradient(135deg, #faf8ff 0%, #f5f3ff 100%);
            transform: translateX(4px);
        }

        .quiz-option:active {
            transform: scale(0.98);
        }

        .option-letter {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            flex-shrink: 0;
        }

        .quiz-option:hover .option-letter {
            background: var(--accent-purple);
            color: white;
        }

        .option-text {
            font-size: 15px;
            color: var(--text-primary);
        }

        /* Result Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-card.full {
            grid-column: 1 / -1;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .stat-value.wood { color: var(--wood); }
        .stat-value.fire { color: var(--fire); }
        .stat-value.earth { color: var(--earth); }
        .stat-value.metal { color: var(--metal); }
        .stat-value.water { color: var(--water); }

        /* City Result */
        .city-result {
            text-align: center;
            padding: 20px 0;
        }

        .city-name {
            font-family: 'Noto Serif SC', serif;
            font-size: 48px;
            font-weight: 700;
            color: #14b8a6;
            margin-bottom: 12px;
            text-shadow: 0 4px 12px rgba(20, 184, 166, 0.2);
        }

        .city-element {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            font-size: 14px;
            color: white;
        }

        .element-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .interpret-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
        }

        .interpret-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #059669;
        }

        .interpret-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .match-card {
            background: linear-gradient(135deg, #eff6ff 0%, #e0f2fe 100%);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid #bfdbfe;
        }

        .match-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--accent-blue);
        }

        .match-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .footer-text {
            text-align: center;
            font-size: 12px;
            color: var(--text-muted);
            margin-top: auto;
            padding: 20px 0;
        }

        .footer-text a {
            color: var(--accent-purple);
            text-decoration: none;
        }

        /* List styles */
        .info-list {
            padding-left: 20px;
            margin: 12px 0;
        }

        .info-list li {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            line-height: 1.6;
        }

        /* Shake animation */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .shake {
            animation: shake 0.3s ease;
        }

        .error-text {
            color: #ef4444;
            font-size: 13px;
            text-align: center;
            margin-top: 8px;
        }

        .success-text {
            color: #10b981;
            font-size: 13px;
            text-align: center;
            margin-top: 8px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Admin Login Page -->
        <div class="page" id="page-admin-login">
            <div class="icon-wrapper orange">
                ğŸ”
            </div>
            <h1 class="page-title">ç®¡ç†åå°</h1>
            <p class="page-subtitle">è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç </p>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ”‘</span>
                    ç®¡ç†å‘˜ç™»å½•
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                    <input type="password" id="admin-password-input" class="password-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" maxlength="8">
                    <p class="password-hint">è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç </p>
                    <p class="error-text" id="admin-error" style="display: none;">å¯†ç é”™è¯¯,è¯·é‡è¯•</p>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="checkAdminPassword()">
                â†’ ç™»å½•ç®¡ç†åå°
            </button>
            
            <button class="btn btn-secondary" onclick="showPage('page-password')" style="margin-top: 12px;">
                â† è¿”å›æµ‹éªŒé¦–é¡µ
            </button>
        </div>

        <!-- Admin Dashboard -->
        <div class="page" id="page-admin-dashboard">
            <div class="icon-wrapper orange">
                âš™ï¸
            </div>
            <h1 class="page-title">éªŒè¯ç ç®¡ç†</h1>
            <p class="page-subtitle">ç®¡ç†æµ‹éªŒè®¿é—®éªŒè¯ç </p>
            
            <div class="stats-card">
                <div class="stats-number" id="total-codes">0</div>
                <div class="stats-label">å½“å‰æœ‰æ•ˆéªŒè¯ç æ•°é‡</div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">â•</span>
                    æ·»åŠ æ–°éªŒè¯ç 
                </div>
                <div class="add-code-form">
                    <input type="text" id="new-code-input" placeholder="è¾“å…¥4-8ä½éªŒè¯ç " maxlength="8">
                    <button class="btn-small btn-success" onclick="addCode()">æ·»åŠ </button>
                </div>
                <p class="success-text" id="add-success" style="display: none;">âœ“ éªŒè¯ç æ·»åŠ æˆåŠŸ!</p>
                <p class="error-text" id="add-error" style="display: none;"></p>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ“‹</span>
                    éªŒè¯ç åˆ—è¡¨
                </div>
                <div class="code-list" id="code-list">
                    <!-- Codes will be inserted here -->
                </div>
            </div>
            
            <button class="btn btn-secondary" onclick="showPage('page-password')">
                â† è¿”å›æµ‹éªŒé¦–é¡µ
            </button>
            
            <p class="footer-text">å°çº¢ä¹¦:ä¹¦è±ªåˆ›ä¸šç¬”è®°</p>
        </div>

        <!-- Page 0: Password -->
        <div class="page active" id="page-password">
            <div class="icon-wrapper">
                ğŸ”
            </div>
            <h1 class="page-title">åŸå¸‚æµ‹éªŒ</h1>
            <p class="page-subtitle">è¯·è¾“å…¥æ ¡éªŒç å¼€å§‹æµ‹è¯•</p>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ”‘</span>
                    è¾“å…¥æ ¡éªŒç 
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                    <input type="password" id="password-input" class="password-input" placeholder="â€¢â€¢â€¢â€¢" maxlength="8">
                    <p class="password-hint">è¯·è¾“å…¥éªŒè¯ç </p>
                    <p class="error-text" id="password-error" style="display: none;">éªŒè¯ç é”™è¯¯,è¯·é‡è¯•</p>
                </div>
            </div>
            
            <div class="info-box">
                <div class="title">â„¹ï¸ è¯´æ˜</div>
                <div class="text">æœ¬æµ‹éªŒç»“åˆæ€§æ ¼ä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„åŸå¸‚ã€‚ä»…ä¾›å¨±ä¹å‚è€ƒã€‚</div>
            </div>
            
            <button class="btn btn-primary" onclick="checkPassword()">
                â†’ éªŒè¯å¹¶å¼€å§‹
            </button>
            
            <p class="footer-text">å°çº¢ä¹¦:ä¹¦è±ªåˆ›ä¸šç¬”è®°</p>
        </div>

        <!-- Page 1: Birth Date -->
        <div class="page" id="page-birthdate">
            <div class="icon-wrapper">
                ğŸ“…
            </div>
            <h1 class="page-title">è¾“å…¥å‡ºç”Ÿæ—¥æœŸ</h1>
            <p class="page-subtitle">æ ¹æ®å‡ºç”Ÿå¹´æœˆæ—¥åˆ†ææ‚¨çš„å±æ€§</p>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ‘¤</span>
                    å‡ºç”Ÿä¿¡æ¯
                </div>
                <p class="card-text" style="margin-bottom: 20px;">æ¯ä¸ªäººçš„å‡ºç”Ÿæ—¥æœŸå¯¹åº”ç‰¹å®šçš„å±æ€§ã€‚è¯·è¾“å…¥æ‚¨çš„å…¬å†å‡ºç”Ÿæ—¥æœŸ,ç³»ç»Ÿå°†åˆ†ææ‚¨é€‚åˆçš„åŸå¸‚ã€‚</p>
                
                <div class="select-group">
                    <div>
                        <label class="form-label">å¹´</label>
                        <select id="birth-year"></select>
                    </div>
                    <div>
                        <label class="form-label">æœˆ</label>
                        <select id="birth-month"></select>
                    </div>
                    <div>
                        <label class="form-label">æ—¥</label>
                        <select id="birth-day"></select>
                    </div>
                </div>
            </div>
            
            <div class="info-box">
                <div class="title">â„¹ï¸ è¯´æ˜</div>
                <div class="text">ç³»ç»Ÿå°†æ ¹æ®æ‚¨çš„å‡ºç”Ÿæ—¥æœŸ,å¹¶ç»“åˆåç»­çš„æ€§æ ¼æµ‹éªŒ,ä¸ºæ‚¨æ¨èæœ€åŒ¹é…çš„åŸå¸‚ã€‚<br><br>ç»“æœä»…ä¾›å¨±ä¹å‚è€ƒã€‚</div>
            </div>
            
            <button class="btn btn-primary" onclick="calculateWuxing()">
                â†’ ä¸‹ä¸€æ­¥,æŸ¥çœ‹
            </button>
            
            <p class="footer-text">å°çº¢ä¹¦:ä¹¦è±ªåˆ›ä¸šç¬”è®°</p>
        </div>

        <!-- Page 2: Wuxing Result -->
        <div class="page" id="page-wuxing">
            <div class="icon-wrapper" style="background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);">
                â˜¯ï¸
            </div>
            <h1 class="page-title">åŸå¸‚æµ‹éªŒ</h1>
            <p class="page-subtitle">æ ¹æ®å‡ºç”Ÿæ—¥æœŸè®¡ç®—å¾—å‡º</p>
            
            <div class="result-card">
                <div class="result-label">æ‚¨çš„å±æ€§</div>
                <div class="wuxing-icon" id="wuxing-icon">âš™ï¸</div>
                <div class="result-value" id="wuxing-name">è¾›é‡‘å‘½</div>
                <div class="element-desc" id="wuxing-desc">é‡‘å±æ€§ä»£è¡¨ç§©åºã€æ‰§è¡Œä¸å†³æ–­åŠ›,é‡è§†è§„åˆ™ä¸ç»“æœã€‚</div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">ğŸ”„</span>
                    ç›¸ç”Ÿå…³ç³»
                </div>
                <p class="card-text">ç›¸ç”Ÿå…³ç³»:æœ¨ç”Ÿç«ã€ç«ç”ŸåœŸã€åœŸç”Ÿé‡‘ã€é‡‘ç”Ÿæ°´ã€æ°´ç”Ÿæœ¨ã€‚<br>ä¸æ‚¨ç›¸ç”Ÿçš„äº”è¡Œä¼šå¢å¼ºæ‚¨çš„èƒ½é‡,å¸¦æ¥å¥½è¿å’Œé¡ºåˆ©ã€‚</p>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">âš¡</span>
                    äº”è¡Œç›¸å…‹å…³ç³»
                </div>
                <p class="card-text">ç›¸å…‹å…³ç³»:æœ¨å…‹åœŸã€åœŸå…‹æ°´ã€æ°´å…‹ç«ã€ç«å…‹é‡‘ã€é‡‘å…‹æœ¨ã€‚<br>ä¸æ‚¨ç›¸å…‹çš„äº”è¡Œå¯èƒ½ä¼šæ¶ˆè€—æ‚¨çš„èƒ½é‡,éœ€è¦æ³¨æ„å¹³è¡¡ã€‚</p>
                
                <div class="relation-grid">
                    <div class="relation-item">
                        <div class="relation-title">ğŸ’š ç”Ÿæ‚¨çš„äº”è¡Œ</div>
                        <div class="relation-flow">
                            <div class="element-dot" id="sheng-you-dot">åœŸ</div>
                            <span class="flow-arrow">â†’</span>
                            <div class="element-dot" id="you-dot-1">é‡‘</div>
                        </div>
                    </div>
                    <div class="relation-item">
                        <div class="relation-title">âœ¨ æ‚¨ç”Ÿçš„äº”è¡Œ</div>
                        <div class="relation-flow">
                            <div class="element-dot" id="you-dot-2">é‡‘</div>
                            <span class="flow-arrow">â†’</span>
                            <div class="element-dot" id="you-sheng-dot">æ°´</div>
                        </div>
                    </div>
                    <div class="relation-item">
                        <div class="relation-title">ğŸ”´ å…‹æ‚¨çš„äº”è¡Œ</div>
                        <div class="relation-flow">
                            <div class="element-dot" id="ke-you-dot">ç«</div>
                            <span class="flow-arrow">â†’</span>
                            <div class="element-dot" id="you-dot-3">é‡‘</div>
                        </div>
                    </div>
                    <div class="relation-item">
                        <div class="relation-title">ğŸš« æ‚¨å…‹çš„äº”è¡Œ</div>
                        <div class="relation-flow">
                            <div class="element-dot" id="you-dot-4">é‡‘</div>
                            <span class="flow-arrow">â†’</span>
                            <div class="element-dot" id="you-ke-dot">æœ¨</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="showQuizIntro()">
                â–¶ å¼€å§‹æ€§æ ¼æµ‹éªŒ
            </button>
            
            <p class="footer-text">å°çº¢ä¹¦:ä¹¦è±ªåˆ›ä¸šç¬”è®°</p>
        </div>

        <!-- Page 3: Quiz Intro -->
        <div class="page" id="page-quiz-intro">
            <div class="icon-wrapper blue">
                ğŸ“
            </div>
            <h1 class="page-title">åŸå¸‚æµ‹éªŒ</h1>
            <p class="page-subtitle">ç»“åˆå…ˆå¤©ä¸æ€§æ ¼ç‰¹å¾</p>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">â„¹ï¸</span>
                    æµ‹éªŒè¯´æ˜
                </div>
                <ul class="info-list">
                    <li>æœ¬æµ‹éªŒåŒ…å«49é“é€‰æ‹©é¢˜</li>
                    <li>é€‰æ‹©ç­”æ¡ˆåä¼šè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€é¢˜</li>
                    <li>ç­”é¢˜ç»“æŸå,ç³»ç»Ÿä¼šç»“åˆæ‚¨çš„æ€§æ ¼æµ‹éªŒç»“æœ,ä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„åŸå¸‚</li>
                </ul>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <span class="emoji">âš–ï¸</span>
                    ç»¼åˆåŒ¹é…ç³»ç»Ÿ
                </div>
                <p class="card-text">ç³»ç»Ÿå°†ç»¼åˆè€ƒè™‘æ‚¨çš„å…ˆå¤©ç‰¹å¾(åŸºäºå‡ºç”Ÿæ—¥æœŸ)å’Œåå¤©æ€§æ ¼ç‰¹å¾(åŸºäºæ€§æ ¼æµ‹éªŒ),é€šè¿‡åŠ æƒç®—æ³•è®¡ç®—å‡ºæœ€é€‚åˆæ‚¨çš„å±æ€§,å¹¶æ¨èåŒ¹é…çš„åŸå¸‚ã€‚</p>
            </div>
            
            <button class="btn btn-primary" onclick="startQuiz()">
                â–¶ å¼€å§‹æµ‹éªŒ
            </button>
            
            <p class="footer-text">å°çº¢ä¹¦:ä¹¦è±ªåˆ›ä¸šç¬”è®°</p>
        </div>

        <!-- Page 4: Quiz -->
        <div class="page" id="page-quiz">
            <div class="quiz-progress">
                <div class="quiz-progress-bar" id="quiz-progress-bar"></div>
            </div>
            
            <div class="card" style="flex: 1;">
                <div class="quiz-counter" id="quiz-counter">1 / 49</div>
                <div class="quiz-question" id="quiz-question">ä½ æ›´å–œæ¬¢å“ªç§è‡ªç„¶æ™¯è§‚?</div>
                
                <div class="quiz-options" id="quiz-options">
                    <!-- Options will be dynamically inserted -->
                </div>
            </div>
            
            <p class="footer-text">å°çº¢ä¹¦:ä¹¦è±ªåˆ›ä¸šç¬”è®°</p>
        </div>

        <!-- Page 5: Result -->
        <div class="page" id="page-result">
            <div class="icon-wrapper teal">
                ğŸ—ºï¸
            </div>
            <h1 class="page-title">æ‚¨çš„åŸå¸‚åŒ¹é…ç»“æœ</h1>
            <p class="page-subtitle">ç»¼åˆå…ˆå¤©ä¸æ€§æ ¼æµ‹éªŒåˆ†æ</p>
            
            <div class="city-result">
                <div class="city-name" id="result-city">æ­å·</div>
                <div class="city-element" id="result-element">
                    <span class="element-indicator" id="element-indicator"></span>
                    <span id="element-text">æ°´å±æ€§</span>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label"><span style="color: var(--earth);">â—</span> åœŸå±æ€§</div>
                    <div class="stat-value earth" id="stat-earth">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><span style="color: var(--metal);">â—</span> é‡‘å±æ€§</div>
                    <div class="stat-value metal" id="stat-metal">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><span style="color: var(--fire);">â—</span> ç«å±æ€§</div>
                    <div class="stat-value fire" id="stat-fire">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><span style="color: var(--wood);">â—</span> æœ¨å±æ€§</div>
                    <div class="stat-value wood" id="stat-wood">0%</div>
                </div>
                <div class="stat-card full">
                    <div class="stat-label"><span style="color: var(--water);">â—</span> æ°´å±æ€§</div>
                    <div class="stat-value water" id="stat-water">0%</div>
                </div>
            </div>
            
            <div class="interpret-card">
                <div class="interpret-title">ğŸ™ï¸ åŸå¸‚è§£è¯»</div>
                <p class="interpret-text" id="city-interpret">è¿™åº§åŸå¸‚ä¸æ‚¨çš„å±æ€§é«˜åº¦å¥‘åˆ,èƒ½å¤Ÿä¸ºæ‚¨æä¾›è‰¯å¥½çš„å‘å±•æœºé‡å’Œç”Ÿæ´»ç¯å¢ƒã€‚</p>
            </div>
            
            <div class="match-card">
                <div class="match-title">âš–ï¸ ç»¼åˆåŒ¹é…è¯´æ˜</div>
                <p class="match-text">æœ€ç»ˆç»“æœç»“åˆäº†æ‚¨çš„å…ˆå¤©äº”è¡Œ(å 40%)å’Œæ€§æ ¼æµ‹éªŒäº”è¡Œ(å 60%),ä¸ºæ‚¨æä¾›æœ€å¹³è¡¡çš„åŸå¸‚å»ºè®®ã€‚<br><br>è€ƒè™‘åˆ°æ‚¨çš„å…ˆå¤©å±æ€§ä¸åå¤©æ€§æ ¼ç‰¹å¾çš„ç»“åˆ,è¿™ä¸ªåŸå¸‚æ—¢èƒ½è¡¥è¶³æ‚¨å‘½ç†çš„ä¸è¶³,åˆèƒ½åŒ¹é…æ‚¨çš„æ€§æ ¼ç‰¹ç‚¹ã€‚</p>
            </div>
            
            <button class="btn btn-secondary" onclick="restartQuiz()" style="margin-bottom: 12px;">
                ğŸ”„ é‡æ–°æµ‹éªŒ
            </button>
            
            <button class="btn btn-secondary" onclick="goToStart()">
                ğŸ“… ä¿®æ”¹å‡ºç”Ÿæ—¥æœŸ
            </button>
            
            <p class="footer-text">å°çº¢ä¹¦:ä¹¦è±ªåˆ›ä¸šç¬”è®°</p>
        </div>
    </div>

    <script>
        // ========== é…ç½®åŒºåŸŸ ==========
        const ADMIN_PASSWORD = 'admin888'; // ç®¡ç†å‘˜å¯†ç ,å»ºè®®ä¿®æ”¹
        
        // ========== æ•°æ®å­˜å‚¨ ==========
        let validCodes = loadCodes();
        
        function loadCodes() {
            const saved = localStorage.getItem('quiz_codes');
            if (saved) {
                return JSON.parse(saved);
            }
            // é»˜è®¤éªŒè¯ç 
            return [
                { code: '9900', createdAt: new Date().toISOString(), usedCount: 0 }
            ];
        }
        
        function saveCodes() {
            localStorage.setItem('quiz_codes', JSON.stringify(validCodes));
        }
        
        // ========== äº”è¡Œæ•°æ® ==========
        const wuxingData = {
            wood: { name: 'æœ¨', color: '#4ade80', emoji: 'ğŸŒ²', tianGan: ['ç”²', 'ä¹™'] },
            fire: { name: 'ç«', color: '#f87171', emoji: 'ğŸ”¥', tianGan: ['ä¸™', 'ä¸'] },
            earth: { name: 'åœŸ', color: '#fbbf24', emoji: 'ğŸ”ï¸', tianGan: ['æˆŠ', 'å·±'] },
            metal: { name: 'é‡‘', color: '#94a3b8', emoji: 'âš™ï¸', tianGan: ['åºš', 'è¾›'] },
            water: { name: 'æ°´', color: '#60a5fa', emoji: 'ğŸ’§', tianGan: ['å£¬', 'ç™¸'] }
        };

        const tianGanWuxing = {
            'ç”²': 'wood', 'ä¹™': 'wood',
            'ä¸™': 'fire', 'ä¸': 'fire',
            'æˆŠ': 'earth', 'å·±': 'earth',
            'åºš': 'metal', 'è¾›': 'metal',
            'å£¬': 'water', 'ç™¸': 'water'
        };

        const tianGanCycle = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];

        const wuxingRelations = {
            wood: { shengBy: 'water', sheng: 'fire', keBy: 'metal', ke: 'earth' },
            fire: { shengBy: 'wood', sheng: 'earth', keBy: 'water', ke: 'metal' },
            earth: { shengBy: 'fire', sheng: 'metal', keBy: 'wood', ke: 'water' },
            metal: { shengBy: 'earth', sheng: 'water', keBy: 'fire', ke: 'wood' },
            water: { shengBy: 'metal', sheng: 'wood', keBy: 'earth', ke: 'fire' }
        };

        const wuxingDescriptions = {
            wood: 'æœ¨å±æ€§ä»£è¡¨ç”Ÿé•¿ã€åˆ›æ–°ä¸ä»çˆ±,è¿½æ±‚è‡ªç”±ä¸å‘å±•,å–„äºè§„åˆ’ä¸å¼€æ‹“ã€‚',
            fire: 'ç«å±æ€§ä»£è¡¨çƒ­æƒ…ã€æ´»åŠ›ä¸ç¤¼ä»ª,å……æ»¡èƒ½é‡ä¸æ„ŸæŸ“åŠ›,å–„äºè¡¨è¾¾ä¸é¢†å¯¼ã€‚',
            earth: 'åœŸå±æ€§ä»£è¡¨ç¨³é‡ã€åŒ…å®¹ä¸ä¿¡ä»»,è„šè¸å®åœ°,å€¼å¾—ä¿¡èµ–,å–„äºåè°ƒä¸ç»è¥ã€‚',
            metal: 'é‡‘å±æ€§ä»£è¡¨ç§©åºã€æ‰§è¡Œä¸å†³æ–­åŠ›,é‡è§†è§„åˆ™ä¸ç»“æœ,å–„äºåˆ†æä¸æ‰§è¡Œã€‚',
            water: 'æ°´å±æ€§ä»£è¡¨æ™ºæ…§ã€çµæ´»ä¸é€‚åº”åŠ›,å–„äºå˜é€šä¸æ²Ÿé€š,å¯Œæœ‰åˆ›æ„ä¸æ´å¯ŸåŠ›ã€‚'
        };

        const cities = {
            wood: [
                { name: 'æ­å·', desc: 'æ±Ÿå—æ°´ä¹¡,ç»¿æ„ç›ç„¶,äº’è”ç½‘åˆ›æ–°ä¹‹éƒ½ã€‚æ­å·çš„çµåŠ¨ä¸åˆ›æ–°æ°”è´¨ä¸æœ¨å±æ€§çš„ç”Ÿé•¿ã€å¼€æ‹“ç²¾ç¥å®Œç¾å¥‘åˆã€‚è¥¿æ¹–çš„ç§€ç¾ä¸é˜¿é‡Œå·´å·´çš„åˆ›ä¸šç²¾ç¥,éƒ½ä½“ç°äº†æœ¨çš„ç”Ÿæœºä¸å‘å±•ã€‚' },
                { name: 'æˆéƒ½', desc: 'å¤©åºœä¹‹å›½,è‰æœ¨ç¹èŒ‚,åŒ…å®¹å¼€æ”¾ã€‚æˆéƒ½çš„é—²é€‚ä¸åˆ›æ„æ°›å›´ä¸æœ¨å±æ€§çš„è‡ªç”±å‘å±•ç‰¹è´¨ç›¸å¾—ç›Šå½°ã€‚è¿™é‡Œæ—¢æœ‰ä¼ ç»Ÿæ–‡åŒ–çš„æ»‹å…»,åˆæœ‰æ–°å…´äº§ä¸šçš„è“¬å‹ƒå‘å±•ã€‚' },
                { name: 'æ˜†æ˜', desc: 'å››å­£å¦‚æ˜¥,èŠ±å›¢é”¦ç°‡,ç”Ÿæ€å®œå±…ã€‚æ˜†æ˜çš„æ¸©æ¶¦æ°”å€™ä¸æœ¨å±æ€§çš„ç”Ÿé•¿ç‰¹è´¨é«˜åº¦å¥‘åˆã€‚è¿™åº§æ˜¥åŸä»¥å…¶ç‹¬ç‰¹çš„è‡ªç„¶ç¯å¢ƒ,ä¸ºè¿½æ±‚æˆé•¿çš„äººæä¾›ç†æƒ³çš„å‘å±•åœŸå£¤ã€‚' },
                { name: 'å—å®', desc: 'ç»¿åŸä¹‹ç§°,çƒ­å¸¦é£æƒ…,ç”Ÿæœºå‹ƒå‹ƒã€‚å—å®çš„äºšçƒ­å¸¦æ°”å€™å­•è‚²äº†ä¸°å¯Œçš„æ¤è¢«,ä¸æœ¨å±æ€§çš„ç”Ÿå‘½åŠ›å®Œç¾å‘¼åº”ã€‚è¿™é‡Œæ˜¯ä¸œç›Ÿå¼€æ”¾é—¨æˆ·,å……æ»¡å‘å±•æœºé‡ã€‚' },
                { name: 'æ¡‚æ—', desc: 'å±±æ°´ç”²å¤©ä¸‹,è‡ªç„¶ä¸äººæ–‡äº¤èã€‚æ¡‚æ—çš„å¥‡å±±ç§€æ°´ä½“ç°äº†æœ¨å±æ€§çš„è‡ªç„¶ä¹‹ç¾ä¸ç”Ÿæ€å’Œè°ã€‚è¿™é‡Œé€‚åˆè¿½æ±‚è¯—æ„ç”Ÿæ´»ä¸è‰ºæœ¯åˆ›ä½œçš„äººã€‚' }
            ],
            fire: [
                { name: 'æ·±åœ³', desc: 'åˆ›æ–°ä¹‹åŸ,æ´»åŠ›å››å°„,æ”¹é©å¼€æ”¾çš„å‰æ²¿é˜µåœ°ã€‚æ·±åœ³çš„çƒ­æƒ…ä¸æ‹¼æç²¾ç¥ä¸ç«å±æ€§çš„èƒ½é‡ã€é¢†å¯¼åŠ›é«˜åº¦å¥‘åˆã€‚è¿™åº§å¹´è½»çš„åŸå¸‚ç‡ƒçƒ§ç€æ¢¦æƒ³ä¸æ¿€æƒ…ã€‚' },
                { name: 'å¹¿å·', desc: 'åƒå¹´å•†éƒ½,çƒ­æƒ…å¥½å®¢,ç¾é£Ÿä¹‹éƒ½ã€‚å¹¿å·çš„å•†ä¸šæ´»åŠ›ä¸åŒ…å®¹çƒ­æƒ…ä¸ç«å±æ€§çš„æ„ŸæŸ“åŠ›ç›¸å¾—ç›Šå½°ã€‚è¿™é‡Œæ˜¯æ•¢ä¸ºäººå…ˆã€å‹‡äºåˆ›æ–°çš„çƒ­åœŸã€‚' },
                { name: 'é‡åº†', desc: 'å±±åŸç«é”…,çƒ­è¾£è±ªçˆ½,ç«‹ä½“éƒ½å¸‚ã€‚é‡åº†çš„ç«è¾£æ€§æ ¼ä¸ç«å±æ€§çš„çƒ­æƒ…ç‰¹è´¨å®Œç¾å¥‘åˆã€‚è¿™åº§8Dé­”å¹»åŸå¸‚å……æ»¡äº†ç”Ÿå‘½çš„çƒ­åº¦ä¸æ´»åŠ›ã€‚' },
                { name: 'é•¿æ²™', desc: 'å¨±ä¹ä¹‹éƒ½,æ•¢ä¸ºäººå…ˆ,æ¹–æ¹˜æ–‡åŒ–å‘æºåœ°ã€‚é•¿æ²™çš„å¨±ä¹ç²¾ç¥ä¸åˆ›æ–°æ´»åŠ›ä¸ç«å±æ€§çš„è¡¨è¾¾æ¬²ç›¸å‘¼åº”ã€‚è¿™é‡Œæ˜¯å¹´è½»äººå®ç°æ¢¦æƒ³çš„èˆå°ã€‚' },
                { name: 'å¦é—¨', desc: 'æµ·æ»¨èŠ±å›­,æ–‡è‰ºæµªæ¼«,æ¸©æš–å®œäººã€‚å¦é—¨çš„çƒ­å¸¦é£æƒ…ä¸æ–‡è‰ºæ°”æ¯ä¸ç«å±æ€§çš„çƒ­æƒ…æµªæ¼«ç›¸å¥‘åˆã€‚è¿™åº§æµ·å²›åŸå¸‚æ•£å‘ç€æ¸©æš–çš„å…‰èŠ’ã€‚' }
            ],
            earth: [
                { name: 'è¥¿å®‰', desc: 'åä¸‰æœå¤éƒ½,å†å²åšé‡,æ–‡åŒ–åº•è•´æ·±åšã€‚è¥¿å®‰çš„ç¨³é‡ä¸ä¼ æ‰¿ä¸åœŸå±æ€§çš„åŒ…å®¹ã€ä¿¡ä»»ç‰¹è´¨å®Œç¾å¥‘åˆã€‚è¿™åº§åŸå¸‚æ‰¿è½½ç€ä¸­åæ–‡æ˜çš„æ ¹è„‰ã€‚' },
                { name: 'éƒ‘å·', desc: 'ä¸­åŸä¹‹åœ°,åœŸæ°”åšé‡,äº¤é€šæ¢çº½ã€‚éƒ‘å·çš„åŠ¡å®ä¸åŒ…å®¹ä¸åœŸå±æ€§çš„ç¨³é‡ç‰¹è´¨é«˜åº¦å¥‘åˆã€‚è¿™é‡Œæ˜¯ä¸­åŸè…¹åœ°,å››é€šå…«è¾¾çš„å›½å®¶ä¸­å¿ƒåŸå¸‚ã€‚' },
                { name: 'æ´›é˜³', desc: 'ç¥éƒ½æ´›é˜³,ç‰¡ä¸¹èŠ±åŸ,åƒå¹´å¸éƒ½ã€‚æ´›é˜³çš„å†å²ç§¯æ·€ä¸åœŸå±æ€§çš„åšé‡åŒ…å®¹ç›¸å‘¼åº”ã€‚è¿™åº§å¤éƒ½è§è¯äº†ä¸­åæ–‡æ˜çš„è¾‰ç…Œä¸ä¼ æ‰¿ã€‚' },
                { name: 'å¤ªåŸ', desc: 'æ™‹å•†æ•…é‡Œ,è¯šä¿¡ä¸ºæœ¬,ç…¤ç‚­ä¹‹éƒ½ã€‚å¤ªåŸçš„æœ´å®ä¸è¯šä¿¡ä¸åœŸå±æ€§çš„å€¼å¾—ä¿¡èµ–ç‰¹è´¨ç›¸å¥‘åˆã€‚è¿™åº§åŸå¸‚æœ‰ç€æ·±åšçš„å•†ä¸šä¼ ç»Ÿä¸æ–‡åŒ–åº•è•´ã€‚' },
                { name: 'çŸ³å®¶åº„', desc: 'ååŒ—é‡é•‡,è¸å®è‚¯å¹²,é©å‘½åœ£åœ°ã€‚çŸ³å®¶åº„çš„åŠ¡å®ä½œé£ä¸åœŸå±æ€§çš„è„šè¸å®åœ°ç²¾ç¥ç›¸å‘¼åº”ã€‚è¿™é‡Œæ˜¯è¿æ¥å—åŒ—çš„é‡è¦æ¢çº½åŸå¸‚ã€‚' }
            ],
            metal: [
                { name: 'åŒ—äº¬', desc: 'é¦–éƒ½ä¹‹åŸ,ç§©åºä¸¥æ˜,æ”¿æ²»æ–‡åŒ–ä¸­å¿ƒã€‚åŒ—äº¬çš„è§„èŒƒä¸æƒå¨ä¸é‡‘å±æ€§çš„ç§©åºã€æ‰§è¡ŒåŠ›é«˜åº¦å¥‘åˆã€‚è¿™åº§åŸå¸‚æ±‡èšäº†å›½å®¶çš„å†³ç­–ä¸èµ„æºã€‚' },
                { name: 'ä¸Šæµ·', desc: 'é­”éƒ½ç¹å,ç²¾è‡´é«˜æ•ˆ,å›½é™…é‡‘èä¸­å¿ƒã€‚ä¸Šæµ·çš„ç²¾æ˜ä¸æ•ˆç‡ä¸é‡‘å±æ€§çš„åˆ†æã€å†³æ–­åŠ›ç›¸å‘¼åº”ã€‚è¿™åº§åŸå¸‚æ˜¯å•†ä¸šä¸æ—¶å°šçš„å®Œç¾ç»“åˆã€‚' },
                { name: 'å¤©æ´¥', desc: 'åŒ—æ–¹æ¸¯å£,è§„çŸ©æ–¹æ­£,å·¥ä¸šé‡é•‡ã€‚å¤©æ´¥çš„è§„çŸ©ä¸åŠ¡å®ä¸é‡‘å±æ€§çš„ç§©åºç‰¹è´¨ç›¸å¥‘åˆã€‚è¿™åº§åŸå¸‚æœ‰ç€ç‹¬ç‰¹çš„æ´¥å‘³æ–‡åŒ–ä¸å·¥ä¸šåº•è•´ã€‚' },
                { name: 'æ²ˆé˜³', desc: 'å…±å’Œå›½é•¿å­,å·¥ä¸šåŸºç¡€é›„åš,ä¸œåŒ—æŒ¯å…´é¾™å¤´ã€‚æ²ˆé˜³çš„å·¥ä¸šç²¾ç¥ä¸é‡‘å±æ€§çš„æ‰§è¡ŒåŠ›ç›¸å‘¼åº”ã€‚è¿™åº§åŸå¸‚æ‰¿è½½ç€ä¸œåŒ—å·¥ä¸šçš„è¾‰ç…Œä¸å¤å…´ã€‚' },
                { name: 'å¤§è¿', desc: 'åŒ—æ–¹æ˜ç ,æµ·æ»¨åŸå¸‚,æµªæ¼«ä¹‹éƒ½ã€‚å¤§è¿çš„ç²¾è‡´ä¸ç§©åºä¸é‡‘å±æ€§çš„è§„èŒƒç‰¹è´¨ç›¸å¥‘åˆã€‚è¿™åº§åŸå¸‚å…¼å…·åŒ—æ–¹çš„å¤§æ°”ä¸æµ·æ»¨çš„æµªæ¼«ã€‚' }
            ],
            water: [
                { name: 'è‹å·', desc: 'ä¸œæ–¹å¨å°¼æ–¯,æ°´ä¹¡å›­æ—,æ¸©å©‰çµåŠ¨ã€‚è‹å·çš„çµç§€ä¸æ™ºæ…§ä¸æ°´å±æ€§çš„é€‚åº”åŠ›ã€æ´å¯ŸåŠ›é«˜åº¦å¥‘åˆã€‚è¿™åº§åŸå¸‚æ˜¯ä¼ ç»Ÿä¸ç°ä»£çš„å®Œç¾èåˆã€‚' },
                { name: 'å—äº¬', desc: 'å…­æœå¤éƒ½,æ±Ÿæ°´ç¯ç»•,æ–‡åŒ–èŸèƒã€‚å—äº¬çš„æ·±æ²‰ä¸æ™ºæ…§ä¸æ°´å±æ€§çš„æ²‰ç¨³é€šè¾¾ç›¸å‘¼åº”ã€‚è¿™åº§åŸå¸‚è§è¯äº†å†å²çš„æ²§æ¡‘ä¸æ–‡æ˜çš„ä¼ æ‰¿ã€‚' },
                { name: 'æ­¦æ±‰', desc: 'ä¹çœé€šè¡¢,ä¸¤æ±Ÿäº¤æ±‡,è‹±é›„ä¹‹åŸã€‚æ­¦æ±‰çš„é€šè¾¾ä¸æ´»åŠ›ä¸æ°´å±æ€§çš„æµåŠ¨ã€å˜é€šç‰¹è´¨ç›¸å¥‘åˆã€‚è¿™åº§åŸå¸‚æ˜¯ä¸­éƒ¨å´›èµ·çš„æ ¸å¿ƒå¼•æ“ã€‚' },
                { name: 'é’å²›', desc: 'çº¢ç“¦ç»¿æ ‘,ç¢§æµ·è“å¤©,å¸†èˆ¹ä¹‹éƒ½ã€‚é’å²›çš„æµ·æ´‹æ°”æ¯ä¸æ°´å±æ€§çš„çµæ´»ã€å¼€æ”¾ç‰¹è´¨é«˜åº¦å¥‘åˆã€‚è¿™åº§åŸå¸‚å…¼å…·æ¬§é™†é£æƒ…ä¸ä¸œæ–¹ç¥éŸµã€‚' },
                { name: 'å®æ³¢', desc: 'ä¸œæµ·ä¹‹æ»¨,æ¸¯é€šå¤©ä¸‹,å•†è´¸é‡é•‡ã€‚å®æ³¢çš„çµæ´»ä¸å•†ä¸šæ™ºæ…§ä¸æ°´å±æ€§çš„å˜é€šã€æ²Ÿé€šèƒ½åŠ›ç›¸å‘¼åº”ã€‚è¿™åº§åŸå¸‚æœ‰ç€æ‚ ä¹…çš„æµ·ä¸Šä¸ç»¸ä¹‹è·¯ä¼ ç»Ÿã€‚' }
            ]
        };

        // 49é“æµ‹éªŒé¢˜ (æ­¤å¤„çœç•¥,ä¸åŸç‰ˆç›¸åŒ)
        const questions = [
            {
                question: 'ä½ æ›´å–œæ¬¢å“ªç§è‡ªç„¶æ™¯è§‚?',
                options: [
                    { text: 'èŒ‚å¯†çš„æ£®æ—å’Œç»¿åœ°', element: 'wood' },
                    { text: 'é˜³å…‰ç¿çƒ‚çš„æµ·æ»©', element: 'fire' },
                    { text: 'å¹¿é˜”çš„å¹³åŸå’Œé«˜åŸ', element: 'earth' },
                    { text: 'å·å³¨çš„é«˜å±±å’ŒçŸ¿è„‰', element: 'metal' },
                    { text: 'æ±Ÿæ²³æ¹–æµ·æˆ–æ¹¿åœ°', element: 'water' }
                ]
            },
            {
                question: 'ä½ çš„æ€§æ ¼æ›´æ¥è¿‘å“ªä¸€ç§æè¿°?',
                options: [
                    { text: 'æ¸©å’Œã€æœ‰è€å¿ƒã€å–„äºæˆé•¿', element: 'wood' },
                    { text: 'çƒ­æƒ…ã€æ´»è·ƒã€å……æ»¡èƒ½é‡', element: 'fire' },
                    { text: 'ç¨³é‡ã€åŠ¡å®ã€å€¼å¾—ä¿¡èµ–', element: 'earth' },
                    { text: 'åšå®šã€æœæ–­ã€è¿½æ±‚å®Œç¾', element: 'metal' },
                    { text: 'çµæ´»ã€å˜é€šã€é€‚åº”åŠ›å¼º', element: 'water' }
                ]
            },
            // ... å…¶ä»–47é“é¢˜ä¸åŸç‰ˆç›¸åŒ
            {
                question: 'ä½ æ›´å–œæ¬¢å“ªç§å¤©æ°”?',
                options: [
                    { text: 'æ˜¥é£å’Œç…¦çš„æ™´å¤©', element: 'wood' },
                    { text: 'é˜³å…‰ç‚½çƒ­çš„å¤æ—¥', element: 'fire' },
                    { text: 'æ¸©å’Œå¹²ç‡¥çš„å¤©æ°”', element: 'earth' },
                    { text: 'ç§‹é«˜æ°”çˆ½çš„æ—¶èŠ‚', element: 'metal' },
                    { text: 'ç»†é›¨ç»µç»µæˆ–é›ªå¤©', element: 'water' }
                ]
            }
        ];

        // ========== çŠ¶æ€å˜é‡ ==========
        let currentPage = 'page-password';
        let birthDate = { year: null, month: null, day: null };
        let userWuxing = null;
        let currentQuestion = 0;
        let quizAnswers = { wood: 0, fire: 0, earth: 0, metal: 0, water: 0 };

        // ========== åˆå§‹åŒ– ==========
        document.addEventListener('DOMContentLoaded', function() {
            initSelects();
            
            document.getElementById('password-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkPassword();
            });
            
            document.getElementById('admin-password-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkAdminPassword();
            });
        });

        function initSelects() {
            const yearSelect = document.getElementById('birth-year');
            const monthSelect = document.getElementById('birth-month');
            const daySelect = document.getElementById('birth-day');

            yearSelect.innerHTML = '<option value="">é€‰æ‹©å¹´ä»½</option>';
            for (let year = 2015; year >= 1950; year--) {
                yearSelect.innerHTML += `<option value="${year}">${year}</option>`;
            }

            monthSelect.innerHTML = '<option value="">é€‰æ‹©æœˆä»½</option>';
            for (let month = 1; month <= 12; month++) {
                monthSelect.innerHTML += `<option value="${month}">${month}æœˆ</option>`;
            }

            daySelect.innerHTML = '<option value="">é€‰æ‹©æ—¥æœŸ</option>';
            for (let day = 1; day <= 31; day++) {
                daySelect.innerHTML += `<option value="${day}">${day}æ—¥</option>`;
            }
        }

        // ========== ç®¡ç†å‘˜åŠŸèƒ½ ==========
        function checkAdminPassword() {
            const password = document.getElementById('admin-password-input').value;
            const errorEl = document.getElementById('admin-error');
            const inputEl = document.getElementById('admin-password-input');
            
            if (password === ADMIN_PASSWORD) {
                errorEl.style.display = 'none';
                showPage('page-admin-dashboard');
                renderCodeList();
            } else {
                errorEl.style.display = 'block';
                inputEl.classList.add('shake');
                setTimeout(() => inputEl.classList.remove('shake'), 300);
            }
        }

        function renderCodeList() {
            const codeList = document.getElementById('code-list');
            const totalCodes = document.getElementById('total-codes');
            
            totalCodes.textContent = validCodes.length;
            
            if (validCodes.length === 0) {
                codeList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“­</div>
                        <div>æš‚æ— éªŒè¯ç </div>
                    </div>
                `;
                return;
            }
            
            codeList.innerHTML = validCodes.map((item, index) => {
                const date = new Date(item.createdAt);
                const dateStr = `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,'0')}-${String(date.getDate()).padStart(2,'0')}`;
                
                return `
                    <div class="code-item">
                        <div class="code-info">
                            <div class="code-value">${item.code}</div>
                            <div class="code-meta">åˆ›å»ºäº ${dateStr} Â· å·²ä½¿ç”¨ ${item.usedCount || 0} æ¬¡</div>
                        </div>
                        <div class="code-actions">
                            <button class="btn-small btn-copy" onclick="copyCode('${item.code}')">å¤åˆ¶</button>
                            <button class="btn-small btn-delete" onclick="deleteCode(${index})">åˆ é™¤</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function addCode() {
            const input = document.getElementById('new-code-input');
            const code = input.value.trim();
            const successEl = document.getElementById('add-success');
            const errorEl = document.getElementById('add-error');
            
            successEl.style.display = 'none';
            errorEl.style.display = 'none';
            
            if (!code) {
                errorEl.textContent = 'è¯·è¾“å…¥éªŒè¯ç ';
                errorEl.style.display = 'block';
                return;
            }
            
            if (code.length < 4) {
                errorEl.textContent = 'éªŒè¯ç è‡³å°‘4ä½';
                errorEl.style.display = 'block';
                return;
            }
            
            if (validCodes.find(c => c.code === code)) {
                errorEl.textContent = 'éªŒè¯ç å·²å­˜åœ¨';
                errorEl.style.display = 'block';
                return;
            }
            
            validCodes.push({
                code: code,
                createdAt: new Date().toISOString(),
                usedCount: 0
            });
            
            saveCodes();
            input.value = '';
            successEl.style.display = 'block';
            renderCodeList();
            
            setTimeout(() => {
                successEl.style.display = 'none';
            }, 3000);
        }

        function deleteCode(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªéªŒè¯ç å—?')) {
                validCodes.splice(index, 1);
                saveCodes();
                renderCodeList();
            }
        }

        function copyCode(code) {
            navigator.clipboard.writeText(code).then(() => {
                alert(`éªŒè¯ç  ${code} å·²å¤åˆ¶åˆ°å‰ªè´´æ¿!`);
            }).catch(() => {
                prompt('è¯·æ‰‹åŠ¨å¤åˆ¶éªŒè¯ç :', code);
            });
        }

        // ========== ç”¨æˆ·éªŒè¯ ==========
        function checkPassword() {
            const password = document.getElementById('password-input').value;
            const errorEl = document.getElementById('password-error');
            const inputEl = document.getElementById('password-input');
            
            const codeObj = validCodes.find(c => c.code === password);
            
            if (codeObj) {
                errorEl.style.display = 'none';
                codeObj.usedCount = (codeObj.usedCount || 0) + 1;
                saveCodes();
                showPage('page-birthdate');
            } else {
                errorEl.style.display = 'block';
                inputEl.classList.add('shake');
                setTimeout(() => inputEl.classList.remove('shake'), 300);
            }
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
            window.scrollTo(0, 0);
        }

        // ========== äº”è¡Œè®¡ç®— ==========
        function calculateWuxing() {
            const year = parseInt(document.getElementById('birth-year').value);
            const month = parseInt(document.getElementById('birth-month').value);
            const day = parseInt(document.getElementById('birth-day').value);

            if (!year || !month || !day) {
                alert('è¯·é€‰æ‹©å®Œæ•´çš„å‡ºç”Ÿæ—¥æœŸ');
                return;
            }

            birthDate = { year, month, day };

            const tianGanIndex = (year - 4) % 10;
            const tianGan = tianGanCycle[tianGanIndex];
            userWuxing = tianGanWuxing[tianGan];

            const wuxing = wuxingData[userWuxing];
            document.getElementById('wuxing-icon').textContent = wuxing.emoji;
            document.getElementById('wuxing-name').textContent = `${tianGan}${wuxing.name}å‘½`;
            document.getElementById('wuxing-desc').textContent = wuxingDescriptions[userWuxing];

            const relations = wuxingRelations[userWuxing];
            
            updateDot('sheng-you-dot', relations.shengBy);
            updateDot('you-dot-1', userWuxing);
            updateDot('you-dot-2', userWuxing);
            updateDot('you-sheng-dot', relations.sheng);
            updateDot('ke-you-dot', relations.keBy);
            updateDot('you-dot-3', userWuxing);
            updateDot('you-dot-4', userWuxing);
            updateDot('you-ke-dot', relations.ke);

            showPage('page-wuxing');
        }

        function updateDot(dotId, element) {
            const dot = document.getElementById(dotId);
            dot.className = `element-dot ${element}`;
            dot.textContent = wuxingData[element].name;
        }

        function showQuizIntro() {
            showPage('page-quiz-intro');
        }

        function startQuiz() {
            currentQuestion = 0;
            quizAnswers = { wood: 0, fire: 0, earth: 0, metal: 0, water: 0 };
            showPage('page-quiz');
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            const totalQuestions = questions.length;
            
            document.getElementById('quiz-counter').textContent = `${currentQuestion + 1} / ${totalQuestions}`;
            document.getElementById('quiz-progress-bar').style.width = `${((currentQuestion + 1) / totalQuestions) * 100}%`;
            document.getElementById('quiz-question').textContent = q.question;

            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';

            const letters = ['A', 'B', 'C', 'D', 'E'];
            q.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'quiz-option';
                optionEl.innerHTML = `
                    <span class="option-letter">${letters[index]}</span>
                    <span class="option-text">${option.text}</span>
                `;
                optionEl.onclick = () => selectAnswer(option.element);
                optionsContainer.appendChild(optionEl);
            });
        }

        function selectAnswer(element) {
            quizAnswers[element]++;
            currentQuestion++;

            if (currentQuestion < questions.length) {
                renderQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            const totalQuizAnswers = Object.values(quizAnswers).reduce((a, b) => a + b, 0);
            
            const combinedScores = {};
            const elements = ['wood', 'fire', 'earth', 'metal', 'water'];
            
            elements.forEach(element => {
                const quizScore = (quizAnswers[element] / totalQuizAnswers) * 100;
                const birthScore = element === userWuxing ? 100 : 0;
                combinedScores[element] = (birthScore * 0.4) + (quizScore * 0.6);
            });

            let dominantElement = 'earth';
            let maxScore = 0;
            elements.forEach(element => {
                if (combinedScores[element] > maxScore) {
                    maxScore = combinedScores[element];
                    dominantElement = element;
                }
            });

            document.getElementById('stat-earth').textContent = `${Math.round(combinedScores.earth)}%`;
            document.getElementById('stat-metal').textContent = `${Math.round(combinedScores.metal)}%`;
            document.getElementById('stat-fire').textContent = `${Math.round(combinedScores.fire)}%`;
            document.getElementById('stat-wood').textContent = `${Math.round(combinedScores.wood)}%`;
            document.getElementById('stat-water').textContent = `${Math.round(combinedScores.water)}%`;

            const citiesForElement = cities[dominantElement];
            const selectedCity = citiesForElement[Math.floor(Math.random() * citiesForElement.length)];

            document.getElementById('result-city').textContent = selectedCity.name;
            document.getElementById('result-city').style.color = wuxingData[dominantElement].color;
            
            const indicator = document.getElementById('element-indicator');
            indicator.style.backgroundColor = wuxingData[dominantElement].color;
            document.getElementById('element-text').textContent = `${wuxingData[dominantElement].name}å±æ€§`;

            document.getElementById('city-interpret').textContent = selectedCity.desc;

            showPage('page-result');
        }

        function restartQuiz() {
            showPage('page-quiz-intro');
        }

        function goToStart() {
            showPage('page-birthdate');
        }
    </script>
</body>
</html>
